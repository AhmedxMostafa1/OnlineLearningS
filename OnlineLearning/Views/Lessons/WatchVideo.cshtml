@model OnlineLearning.Models.Lesson

@{
    ViewData["Title"] = Model.LessonTitle;
    var embedUrl = ViewBag.EmbedUrl as string;
    var courseId = (int)(ViewBag.CourseId ?? 0);
    var canView = ViewBag.CanView as bool? ?? false;
}

<div class="container mt-4">
    <div class="card shadow-lg rounded-4">
        <div class="card-header d-flex justify-content-between align-items-center bg-light">
            <h2 class="mb-0">
                <i class="bi bi-play-btn-fill me-2"></i>@Model.LessonTitle
            </h2>
            <a asp-controller="Courses" asp-action="Details" asp-route-id="@courseId" class="btn btn-secondary btn-sm">
                <i class="bi bi-arrow-left-circle me-1"></i> Back to Course
            </a>
        </div>
        <div class="card-body">
            @if (canView && !string.IsNullOrEmpty(embedUrl))
            {
                <div class="ratio ratio-16x9">
                    <iframe src="@embedUrl" title="@Model.LessonTitle"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen class="border-0 rounded-3"></iframe>
                </div>
            }
            else
            {
                <div class="alert alert-warning">
                    You do not have permission to view this video or the video is unavailable.
                </div>
            }
        </div>
    </div>
</div>
